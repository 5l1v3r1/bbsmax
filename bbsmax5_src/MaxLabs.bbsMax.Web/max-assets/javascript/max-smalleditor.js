function createQuicklyEditor(h){function i(c){new popup("font_"+c,c+"_font",0,"","top");new popup("size_"+c,c+"_size",0,"","top");new popup("color_"+c,c+"_color",0,"","top");new popup("link_"+c,[c+"_image",c+"_link"],0,"","top");this.linkType=0;this.id=c;this.createRange=function(){if(document.all){$(this.id+"_area").focus();this.range=document.selection.createRange()}};this.createUbb=function(a,d,b){var e=$(this.id+"_area"),f="";e.focus();if(document.all){if(this.range)e=this.range;else this.range=
e=document.selection.createRange();e.select();f=e.text}else{f=e.value.length;f=e.value.substr(e.selectionStart,e.selectionEnd-e.selectionStart)}if(!f&&b)f=b;this.insertContent(a+f+d,!f?d.length:0)};var g=function(a){var d=$(a+"_url"),b=d.value;a=window[smallEditorID+"_"+a];a.linkType==1?a.insertContent("[img]"+b+"[/img]"):a.createUbb("[url="+b+"]","[/url]",b);d.value="http://"};this.insertLink=function(){this.createRange();this.linkType=0;var a=smallEditorID+"_"+this.id;window[a]=this;$(c+"_urlok").onclick=
function(){$("link_"+c).style.display="none";g(window[a].id)}};this.insertImage=function(){this.createRange();this.linkType=1;var a=smallEditorID+"_"+this.id;window[a]=this;$(c+"_urlok").onclick=function(){$("link_"+c).style.display="none";g(window[a].id)}};this.insertFace=function(){function a(){window.facePanel&&window.facePanel.close();removeHandler(document.documentElement,"click",a)}this.createRange();var d=this;d=$(smallEditorID+"_face");window.facePanel=openPanel(root+"/max-dialogs/editor/emoticons.aspx?id="+
smallEditorID+"&ispanel=true&from=quickreply",d,"",391,310,"top");addHandler(document.documentElement,"click",a)};var j=function(){openDialog.obj.close();removeHandler(document.documentElement,"click",j)};this.insertContent=function(a,d){var b=$(this.id+"_area");b.focus();if(document.all){b=this.range;b.text=a;b.collapse(false);this.range=null;b=document.selection.createRange();d?b.move("character",0-d):b.move("character",a.length);b.collapse(true);b.select()}else{var e=b.selectionStart,f=b.selectionEnd,
k=b.value.length,l=b.value.substr(0,e);f=b.value.substr(f,k-f);b.value=l+a+f;a=e+a.length;a=d?a-d:a;b.selectionStart=a;b.selectionEnd=a}}}smallEditorID=h;document.write('<div class="quickpost-editor">    <div class="clearfix quickpost-editortool" id="editortool">        <div class="quickpost-editorbutton">            <a class="fontname" id="'+smallEditorID+'_font" href="javascript:void(0);" title="\u5b57\u4f53">\u5b57\u4f53</a>            <a class="fontsize" id="'+smallEditorID+'_size" href="javascript:void(0);" title="\u5b57\u53f7">\u5b57\u53f7</a>            <a class="textcolor" id="'+
smallEditorID+'_color" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.createRange();" title="\u989c\u8272">\u989c\u8272</a>            <a class="bold" id="'+smallEditorID+'_bold" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.createUbb(\'[b]\',\'[/b]\')" title="\u52a0\u7c97">\u52a0\u7c97</a>            <a class="italic" id="'+smallEditorID+'_italic" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.createUbb(\'[i]\',\'[/i]\')" title="\u659c\u4f53">\u659c\u4f53</a>            <a class="link" id="'+
smallEditorID+'_link" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.insertLink()" title="\u94fe\u63a5">\u94fe\u63a5</a>            <a class="image" id="'+smallEditorID+'_image" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.insertImage()" title="\u56fe\u7247">\u56fe\u7247</a>            <a class="quote" id="'+smallEditorID+'_quote" href="javascript:void(0);" onclick="mx_editor2_'+smallEditorID+'.createUbb(\'[quote]\',\'[/quote]\')" title="\u5f15\u7528">\u5f15\u7528</a>            <a class="emoticon" id="'+
smallEditorID+'_face" href="javascript:void(mx_editor2_'+smallEditorID+'.insertFace());" title="\u8868\u60c5">\u8868\u60c5</a>        </div>    </div>    <div class="quickpost-editorenter">        <textarea name="'+smallEditorID+'" id="'+smallEditorID+'_area" cols="65" rows="5"></textarea>    </div></div><div id="font_'+smallEditorID+'" class="quickpost-menu editor-font" style="display:none;" onclick="this.style.display=\'none\';"><script type="text/javascript">    var _fTable = {"SimSun": "\u5b8b\u4f53","SimHei": "\u9ed1\u4f53","FangSong_GB2312": "\u4eff\u5b8b\u4f53","KaiTi_GB2312": "\u6977\u4f53","NSimSun": "\u65b0\u5b8b\u4f53","Arial": "Arial","Arial Black": "Arial Black","Times New Roman": "Times New Roman","Courier New": "Courier New","Tahoma": "Tahoma","Verdana": "Verdana"};    document.write("<ul>");    for (var k in _fTable) {document.write(\'<li onclick="mx_editor2_'+
smallEditorID+'.createUbb(\\\'[font=\' + k + \']\\\',\\\'[/font]\\\')"><a href="javascript:;" style="font-family:\'+_fTable[k]+\'">\' + _fTable[k] + "</a></li>")}    document.write("</ul>");<\/script></div><div id="size_'+smallEditorID+'" class="quickpost-menu editor-size" style="display:none;" onclick="this.style.display=\'none\';"><script type="text/javascript">    document.write("<ul>");    for (var i = 1; i <= 7; i++) {document.write(\'<li onclick="mx_editor2_'+smallEditorID+'.createUbb(\\\'[size=\' + i + \']\\\',\\\'[/size]\\\')"><font size="\' + i + \'"><a href="javascript:;">\' + i + "\u53f7</a></font></li>")}    document.write("</ul>");<\/script></div><div id="color_'+
smallEditorID+'" class="quickpost-menu editor-palette" style="display:none;" onclick="this.style.display=\'none\';"><script type="text/javascript">    var _cTable = [    ["#FFFFFF", "#E5E4E4", "#D9D8D8", "#C0BDBD", "#A7A4A4", "#8E8A8B", "#827E7F", "#767173", "#5C585A", "#000000"],    ["#FEFCDF", "#FEF4C4", "#FEED9B", "#FEE573", "#FFED43", "#F6CC0B", "#E0B800", "#C9A601", "#AD8E00", "#8C7301"],    ["#FFDED3", "#FFC4B0", "#FF9D7D", "#FF7A4E", "#FF6600", "#E95D00", "#D15502", "#BA4B01", "#A44201", "#8D3901"],    ["#FFD2D0", "#FFBAB7", "#FE9A95", "#FF7A73", "#FF483F", "#FE2419", "#F10B00", "#D40A00", "#940000", "#6D201B"],    ["#FFDAED", "#FFB7DC", "#FFA1D1", "#FF84C3", "#FF57AC", "#FD1289", "#EC0078", "#D6006D", "#BB005F", "#9B014F"],    ["#FCD6FE", "#FBBCFF", "#F9A1FE", "#F784FE", "#F564FE", "#F546FF", "#F328FF", "#D801E5", "#C001CB", "#8F0197"],    ["#E2F0FE", "#C7E2FE", "#ADD5FE", "#92C7FE", "#6EB5FF", "#48A2FF", "#2690FE", "#0162F4", "#013ADD", "#0021B0"],    ["#D3FDFF", "#ACFAFD", "#7CFAFF", "#4AF7FE", "#1DE6FE", "#01DEFF", "#00CDEC", "#01B6DE", "#00A0C2", "#0084A0"],    ["#EDFFCF", "#DFFEAA", "#D1FD88", "#BEFA5A", "#A8F32A", "#8FD80A", "#79C101", "#3FA701", "#307F00", "#156200"],    ["#D4C89F", "#DAAD88", "#C49578", "#C2877E", "#AC8295", "#C0A5C4", "#969AC2", "#92B7D7", "#80ADAF", "#9CA53B"]];    document.write(\'<table cellpadding="0" cellspacing="0">\');    for (var i = 0; i < _cTable.length; i++) {        document.write("<tr>");        for (var j = 0; j < _cTable[i].length; j++) {            document.write(\'<td style="font-size:0;height:12px;width:12px;background:\' + _cTable[i][j] + \'" onclick="mx_editor2_'+
smallEditorID+".createUbb(\\'[color=' + _cTable[i][j] + ']\\',\\'[/color]\\')\">&nbsp;</td>');        }        document.write(\"</tr>\");    }    document.write(\"</table>\");<\/script></div><div id=\"link_"+smallEditorID+'" class="quickpost-menu editor-link" style="display:none;">    <div class="editor-link-inner">        <h3 class="label"><label for="'+smallEditorID+'_url">\u94fe\u63a5\u5730\u5740</label></h3>        <div class="clearfix editor-link-enter">            <input class="text" id="'+
smallEditorID+'_url" value="http://" type="text" />        </div>        <div class="clearfix editor-link-submit">            <span class="minbtn-wrap"><span class="btn"><input class="button" type="button" id="'+smallEditorID+'_urlok" value="\u786e\u5b9a" /></span></span>        </div>    </div></div>');window["mx_editor2_"+smallEditorID]=new i(smallEditorID)};
